# 開発記録 2026-01-10

## 実装内容

### 1. エアコン選択カードUI
- 4ステップの選択方式を実装
  - ①シリーズを選ぶ（Eシリーズ/GXシリーズ/霧ヶ峰Zシリーズ）
  - ②何帖用かを選ぶ（6畳/10畳/14畳）
  - ③設置階を選ぶ（1階/2階/3階）
  - ④風向調整板の有無を選ぶ
- 「選択しない」オプション付き
- 複数台追加対応

### 2. 玄関ドア選択UI（5ステップ）
- ①ドアデザインを選ぶ（N08/N18/N15/C10）
- ②色を選ぶ
- ③鍵の種類を選ぶ
  - 手動キー（LIFE標準）
  - ポケットキー（LIFE+/HOURS/LACIE標準）
  - 顔認証キー（全プランオプション +200,000円）
- ④ハンドル形状を選ぶ（鍵の種類で選択肢が変化）
- ⑤操作盤付インターフェースユニットの有無

### 3. ポーチカテゴリ整理
- ポーチサイズ拡張 → 設計カテゴリ（設計者が選択）
- ポーチタイル → 外装カテゴリ（お客様が選択）

### 4. 庇AF95データ修正
- 16パターン（屋根部4色×軒天面4色）に拡張
- 屋根部カラー: ステンカラー/シルバー/ブロンズ/ブラック
- 軒天面カラー: ヒッコリー/ウォルナット/チーク/ナラ

### 5. ドキュメント更新
- CLAUDE.mdにノーコード運用要件を追加
  - リリース後は社員がコードを書かずに編集できる状態にする
  - 商品データ・カテゴリ・表示順・選択フロー・プラン別設定

### 6. エラー修正（コンソールエラー対応）
- Service Worker修正
  - placeholder.supabase.co（環境変数未設定時のダミーURL）へのリクエストを無視
  - オフライン時にキャッシュがない場合の503レスポンス対応
  - キャッシュバージョンをv4に更新
- Web Vitals修正
  - 存在しない`/api/analytics/web-vitals`へのPOSTリクエストを削除
  - Google Analytics 4への送信のみに変更

## 確認済みデータ（PDFとの整合性）
- ✅ 軒天
- ✅ 屋根
- ✅ 外部建材（破風・軒樋・竪樋・笠木・土台水切）
- ✅ ガレージシャッター
- ✅ 庇
- ✅ 外部設備

## 新規作成ファイル
- `src/components/catalog/AirconSelector.tsx`
- `src/components/catalog/EntranceDoorSelector.tsx`

## コミット一覧
1. `feat: エアコン選択カードUI追加 & ポーチカテゴリ整理`
2. `feat: 玄関ドア選択UIを5ステップに改善`
3. `docs: ノーコード運用要件をCLAUDE.mdに追加`
4. `fix: 庇AF95を16パターン（屋根部4色×軒天面4色）に修正`
5. `fix: Service WorkerとWeb Vitalsのエラー修正`

## 次回の課題
- Supabaseへのデータ移行（ノーコード運用対応）
- 管理画面での商品編集機能
- **Vercel環境変数設定**: `VITE_SUPABASE_URL`と`VITE_SUPABASE_ANON_KEY`をVercelダッシュボードで設定する（現在はplaceholderを使用中）
